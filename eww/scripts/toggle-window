#!/usr/bin/env bash

# Toggle eww window with exclusive behavior
# Opens the specified window and closes all others in the managed list
# Usage: ./toggle-window <window_name>

if [ $# -eq 0 ]; then
    echo "Usage: $0 <window_name>"
    echo "Example: $0 power_window"
    exit 1
fi

WINDOW_NAME="$1"

# Get the current active windows
active=$(eww active-windows)

# Define the list of windows to manage
windows=("power_window" "wifi_list_window" "date_window" "sound_window" "media_window")

# Check if the window is currently open
if echo "$active" | grep -q "$WINDOW_NAME"; then
    # Window is open, close it
    eww close "$WINDOW_NAME"
else
    # Close all managed windows that are open
    for window in "${windows[@]}"; do
        if echo "$active" | grep -q "$window"; then
            eww close "$window"
        fi
    done
    
    # Open the specified window
    eww open "$WINDOW_NAME"
fi
